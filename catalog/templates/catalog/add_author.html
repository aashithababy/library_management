{% load static %}

{% block content %}
<div class="container">
    <div class="card">
        <h1 class="card-title">Add New Author</h1>
        
        <!-- Form with proper enctype and error handling -->
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <table class="table">
                {% for field in form %}
                <tr>
                    <td>{{ field.label_tag }}</td>
                    <td>
                        {% if field.name == 'profile_picture' %}
                            <!-- Custom file input handling -->
                            {{ field }}
                            <span id="file-name" style="font-weight: bold; color: goldenrod;"></span>
                        {% else %}
                            {{ field }}
                        {% endif %}
                        
                        {% if field.errors %}
                            <p class="invalid-feedback">{{ field.errors.as_text }}</p>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </table>
            {% if next %}
                <input type="hidden" name="next" value="{{ next }}">
            {% endif %}
            <!-- Centered submit button -->
            <div style="text-align: center; margin-top: 20px;">
                <button type="submit" class="btn">Add Author</button>
            </div>
        </form>
    </div>
</div>

<!-- CSS Styling for the Form -->
<style>
    .table {
        border-spacing: 0 10px;
        width: 100%;
    }

    .table td {
        vertical-align: top;
        padding: 10px;
    }

    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: url('{% static "images/background1.jpeg" %}') no-repeat center center fixed;
        background-size: cover;
        background-attachment: fixed;
    }

    .card {
        margin-top: 20px;
        background-color: black;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 6px 20px goldenrod;
        width: 100%;
        max-width: 500px;
        color: white;
    }

    .card-title {
        font-size: 28px;
        margin-bottom: 20px;
        color: goldenrod;
        text-align: center;
    }

    .card label {
        color: white;
    }

    .btn {
        width: 40%;
        color: white;
        background-color: goldenrod;
        height: 50px;
        font-size: 16px;
        padding: 10px;
        text-align: center;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .btn:hover {
        background-color: darkgoldenrod;
    }

    .form-control {
        width: 100%;
        height: 30px;
        padding: 10px;
        font-size: 16px;
        color: white;
    }

    .alert-danger {
        color: red;
        font-weight: bold;
        margin-top: 10px;
    }

    .invalid-feedback {
        color: red !important;
        font-weight: bold;
        display: block;
    }
</style>

<!-- JavaScript for displaying the chosen file name -->
<script>
    document.getElementById('id_profile_picture').addEventListener('change', function(event) {
        var fileName = event.target.files[0].name;
        document.getElementById('file-name').textContent = fileName;
    });
</script>
{% endblock %}
